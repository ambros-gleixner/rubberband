<div aria-labelledby="settings-tab" role="tabpanel" class="tab-pane fade" id="settings">

  <!-- headline ==================================================================== -->
  {% if file.settings %}
  <div class="rb-details-tab-buttons row justify-content-end">

    <span class="bs-tooltip ml-2 mr-2" data-toggle="tooltip" data-placement="top" title="Show/Hide rows with equal data">
      <span id="toggle-settings" class='fa fa-eye-slash'></span></span>

    <a class="bs-tooltip ml-2 mr-2" data-toggle="tooltip" data-placement="top" href="/file/{{file.meta.id}}?ftype=.set" title="view settings file" >
      <span class="fa fa-exclamation-triangle"></span></a>

    <a class="bs-tooltip ml-2 mr-2" data-toggle="modal"   data-placement="top" href="" data-target="#downloadSettingsOptions" title="download settings">
      <span class="fa fa-download"></span></a>


  </div>
  {% end %}
  <h2 class="rb-details-tab-title">Settings</h2>
  <!-- end headline ==================================================================== -->
  {% if file.settings %}

  <div class="rb-testrun-table">

    <!-- table ==================================================================== -->
    <table class="settings-table table table-bordered table-hover" width="100%">

      <thead><tr>
        <th>Setting name</th>
        <th>Run value</th>
        {% for c in compare %}
          <th>Compare</th>
        {% end %}
        <th>Default value</th>
      </tr></thead>

      <tbody>
        {% for i in file.settings %}
          <tr{% if are_equivalent([f.settings_default for f in [file]+compare]+[f.settings for f in [file]+compare], i) %} class="toggle-settings-hide" {% end %}>
            <td>{{ i }}</td>
            <td>{{ format_attr(file.settings, i) }}</td>
            {% for c in compare %}
            <td>{{ format_attr(c.settings, i) }}</td>
            {% end %}
            <td>{{ format_attr(file.settings_default, i) }}</td>
          </tr>
        {% end %}

      </tbody>
    </table>
  </div>

  <!-- Modal -->
  {% module Template("modal.html", id="downloadSettingsOptions", modalheading="Download Formats", modalbody='''
  <ul>
    <li><a href="/file/{{file.meta.id}}?download=true&ftype=.set&format=raw" download="{{ file.get_filename(ending='.set') }}">plaintext</a></li>
    <li><a href="/file/{{file.meta.id}}?download=true&ftype=.set&format=gzip" download="{{ file.get_filename(ending='.set') }}.gz">gzip</a></li>
    <li><a href="/file/{{file.meta.id}}?download=true&ftype=.set&format=json" download="{{ file.get_filename(ending='.set') }}.json">json</a></li>
    <li>csv (coming soon!)</li>
  </ul>
  ''') %}

{% else %}
  <p>No settings file found.</p>
{% end %}
</div>
