<div aria-labelledby="details-tab" role="tabpanel" class="tab-pane fade active show" id="details">

  <!-- headline ==================================================================== -->
  <div class="rb-details-tab-buttons row justify-content-end">
    <a class="bs-tooltip ml-2 mr-2" data-toggle="tooltip" data-placement="top" href="/search?base={{ file.meta.id }}{% if comparelist is not None %}&compare={{ comparelist }}{% end %}" title="add comparison runs">
      <span class="fa fa-plus"></span></a>
    {% if fileoptions[".out"] %}
    <a class="bs-tooltip ml-2 mr-2" data-toggle="tooltip" data-placement="top" href="/file/{{file.meta.id}}" title="view log file">
      <span class="fa fa-info-circle"></span></a>
    {% end %}
    {% if fileoptions[".meta"] %}
    <a class="bs-tooltip ml-2 mr-2" data-toggle="tooltip" data-placement="top" href="/file/{{file.meta.id}}?ftype=.meta" title="view meta file">
      <span class="fa fa-paperclip"></span></a>
    {% end %}
    {% if fileoptions[".err"] %}
    <a class="bs-tooltip ml-2 mr-2" data-toggle="tooltip" data-placement="top" href="/file/{{file.meta.id}}?ftype=.err" title="view error file">
      <span class="fa fa-exclamation-circle"></span></a>
    {% end %}
    <a class="bs-tooltip ml-2 mr-2" data-toggle="modal"   data-placement="top" href="" data-target="#downloadSummaryOptions" title="download results">
      <span class="fa fa-file-download" ></span></a>
    <a class="bs-tooltip ml-2 mr-2" data-toggle="modal"   data-placement="top" href="" data-target="#deleteResultModal" title="delete result">
      <span class="fa fa-trash-alt"></span></a>
    {% if fileoptions[".out"] %}
    <a class="bs-tooltip ml-2 mr-2" data-toggle="modal"   data-placement="top" href="" data-target="#reimportResultModal" title="reimport result">
      <span class="fa fa-redo"></span></a>
    {% end %}
    {% if fileoptions[".out"] or fileoptions[".meta"] or fileoptions[".err"] %}
    <a class="bs-tooltip ml-2 mr-2" data-toggle="tooltip" data-placement="top" href="{{ downloadzip }}" title="download zip archive">
      <span class="fa fa-gift"></span></a>
    {% end %}
  </div>
  <h2 class="rb-details-tab-title">Details</h2>
  <!-- end headline ==================================================================== -->

  {% if compare %}
  <form action="/compare" method="post">
  {% end %}

  <h3>Testruns</h3>

  {% if compare %}
    <div class="alert alert-info">
      <div class="row">
        <label class="col-form-label col">Change comparison base?</label>
        <div class="col">
          <button type="submit" class="btn btn-primary float-right">Submit</button>
        </div>
      </div>
    </div>
  {% end %}

  <div class="rb-testrun-table">
    {% raw rendered_results_table %}
  </div>

  {% if compare %}
  </form>
  {% end %}

  {% if sets.get("difference") %}
    <h3>Exclusions</h3>
    <div id="exclusions">
      <p>The following {{ len(sets["difference"]) }} instances are not present in all of the compared test sets, and have therefore been ommitted from the table below:</p>
      <p class="exclusions">{{", ".join(sets['difference'])}}</p>
    </div>
  {% end %}

    <h3>Detailed data</h3>
    <div class="rb-testrun-table datatables-content">
      <table class="results-table compact table-hover rb-table-data" width="100%">
      {% if compare %}
      {% include "compare_res.html" %}
      {% else %}
      {% include "res.html" %}
      {% end %}
      </table>
    </div>

  <h3>How do I interpret the comparison view?</h3>
  <div>
    <p>
    The color of the cell represents how the value for that particular instance compares.
    </p><p>
    A green cell indicates that the value of the baserun is better than all the comparisons, red means that it is the worse than all the others.
    The color intensity corresponds to the quotient of the basevalue to the nearest comparison value.
    </p><p>
    For green cells the nearest comparison value is the smallest of the comparisons;
    for red cells the nearest comparison value is the largest of the comparisons.
    </p><p>
    A grey cell indicates uncomparable values or that one of the values is zero.
    For the primal and dual bounds columns, the intensity reflects the relative difference between the values.
    In a comparison of more than two testruns, the grey scale value is chosen according to the magnitude of the relative standard deviation.
    </p><p>
    The color intensities in nodes and time columns are computed after a shift of 100 nodes and 1 second, respectively.
    </p>
  </div>

</div>

<!-- Download Modal -->
{% module Template("modal.html", id="downloadSummaryOptions", modalheading="Download Formats", modalbody='''
  <h6>Full Results</h6>
  <ul>
    <li><a href="/file/{{file.meta.id}}?download=true&ftype=.out&format=raw" download="{{ file.get_filename(ending='.out') }}">plaintext</a></li>
    <li><a href="/file/{{file.meta.id}}?download=true&ftype=.out&format=gzip" download="{{ file.get_filename(ending='.out') }}.gz">gzip</a></li>
    <li><a href="/file/{{file.meta.id}}?download=true&ftype=.out&format=json" download="{{ file.get_filename(ending='.out') }}.json">json</a></li>
    <li>csv (coming soon!)</li>
  </ul>
  <h6>Summary Results</h6>
  <ul>
    <li>json (coming soon!)</li>
    <li>csv (coming soon!)</li>
  </ul>
''') %}

<!-- Delete Result Modal -->
{% module Template("modal.html", id="deleteResultModal", modalheading="Delete Testrun?", modalbody='''
  <p>Are you sure that you want to delete this result?</p>
''', modalfooter='''
  <button type="button" id="delete-result" class="btn btn-danger">Yes! I know what I'm doing.</button>
''') %}

<!-- Reimport Result Modal -->
{% module Template("modal.html", id="reimportResultModal", modalheading="Reimport Testrun?", modalbody='''
  <p>Are you sure that you want to reimport this result?</p>
''', modalfooter='''
  <button type="button" id="reimport-result" class="btn btn-danger">Yes! I know what I'm doing.</button>
''') %}

<!-- Show Evalfile Modal -->
{% module Template("modal.html", id="info-modal", modalheading="Information", modalbody='''
  <pre lang="xml" id="info-modal-content">
  </pre>
''') %}

